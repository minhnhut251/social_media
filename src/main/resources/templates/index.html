<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org" xmlns:sec="https://www.thymeleaf.org/thymeleaf-extras-springsecurity6">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css">
    <script type="text/javascript" src="/webjars/jquery/jquery.min.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
</head>
<style>
    /* Reset */
* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    font-family: Arial, sans-serif;
}

header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    background: #fff;
    padding: 10px 20px;
    border-bottom: 1px solid #ddd;
}

header input {
    padding: 8px;
    width: 40%;
    border-radius: 20px;
    border: 1px solid #ccc;
}

header nav a {
    margin: 0 10px;
    font-size: 24px;
    text-decoration: none;
}

/* Layout */
.container {
    display: flex;
    margin: 20px;
}

/* Sidebar Left */
.sidebar-left {
    width: 200px;
    padding: 10px;
    background: #f1f1f1;
}

.sidebar-left ul li {
    list-style: none;
    padding: 10px;
    border-bottom: 1px solid #ccc;
}

/* Main Content */
main {
    flex: 1;
    padding: 10px;
}

.status-box {
    background: #fff;
    padding: 10px;
    border-radius: 10px;
    box-shadow: 0 0 5px #ccc;
}

.post {
    background: #fff;
    padding: 10px;
    margin-top: 20px;
    border-radius: 10px;
    box-shadow: 0 0 5px #ccc;
}

.post img {
    width: 100%;
    border-radius: 10px;
}

.post video {
    width: 100%;
    border-radius: 10px;
}

.actions {
    margin-top: 10px;
    color: #555;
}

/* Suggestions */
.suggestions {
    margin-top: 20px;
}

.friend {
    display: flex;
    align-items: center;
    margin: 10px 0;
}

.friend img {
    width: 40px;
    height: 40px;
    border-radius: 50%;
    margin-right: 10px;
}

.friend button {
    margin-left: auto;
    padding: 5px 10px;
    background: blue;
    color: white;
    border: none;
    cursor: pointer;
}

/* Sidebar Right */
.sidebar-right {
    width: 200px;
    padding: 10px;
    background: #f1f1f1;
}

.sidebar-right ul li {
    list-style: none;
    padding: 10px;
    border-bottom: 1px solid #ccc;
}

    .post-image{
    height: 100px;
    }
</style>
<body>
<div th:replace="fragments/navbar :: navbar"></div>

<div sec:authorize="isAnonymous()">
    <h3><a th:href="@{/register}">Register</a></h3>
    <h3><a th:href="@{/login}">Login</a></h3>
</div>
<div sec:authorize="isAuthenticated()">
    <form th:action="@{/logout}" method="post">
        <p>
            Welcome <b><span sec:authentication="principal.fullName"></span></b>
            <div th:text="${#authentication.getPrincipal().getId()}"></div>

        </p>
        <input type="submit" value="Sign Out" />
    </form>
</div>

<h3><a th:href="@{/users}">List of Users</a></h3>

<h3><a th:href="@{/new_post}">New Post</a></h3>

<div>
    <table class="table table-striped table-bordered">
        <thead class="thead-dark">
        <tr>
            <th>User ID</th>
            <th>Post ID</th>
            <th>Content</th>
            <th>Image</th>
            <th>Actions</th>
        </tr>
        </thead>
        <tbody>
        <tr th:each="post: ${listPosts}">
            <td th:text="${post.users.id}">matk</td>
            <td th:text="${post.mabd}">mabd</td>
            <td th:text="${post.noiDung}">noiDung</td>
            <td>
                <img th:if="${post.mediaURL != null && !post.mediaURL.isEmpty()}"
                     th:src="@{${post.mediaURL}}"
                     class="post-image" alt="Post image"/>
            </td>
            <td>
                <div sec:authorize="isAuthenticated()" th:if="${post.users.id == #authentication.getPrincipal().getId()}">
                    <a th:href="@{/post_edit/{id}(id=${post.mabd})}" class="btn btn-primary btn-sm">Edit</a>
                    <a th:href="@{/post_delete/{id}(id=${post.mabd})}" class="btn btn-danger btn-sm">Delete</a>
                </div>
            </td>
        </tr>
        </tbody>
    </table>
</div>

<div class="row container-fluid mt-5">
    <div class="col-3 ">
        <div class="h4">Trang cá nhân</div>
        <ul class="list-group">
            <li class="list-group-item">Mua sắm</li>
            <li class="list-group-item">bạn bè</li>
            <li class="list-group-item">Đăng kí bán hàng</li>
        </ul>
    </div>
    <div class="col-6 ">
        <div class="h2">News</div>
        <ul class="list-group">
            <div class="status-box">
                <input type="text" placeholder="Bạn đang nghĩ gì?">
                <button>Ảnh/Video</button>
                <button>Phát trực tiếp</button>
            </div>
            <div class="post">
                <div class="user">Người dùng • 1 ngày trước</div>
                <img src="food.jpg" alt="Bữa ăn">
                <p>Đây là bài đăng mới của tôi</p>
                <div class="actions">
                    100 •  16 bình luận •  11 chia sẻ
                </div>
            </div>

            <div class="suggestions">
                <h3>Gợi ý kết bạn</h3>
                <div class="friend">
                    <img src="avatar1.png" alt="Avatar">
                    <p>Quen không</p>
                    <button>Kết bạn</button>
                </div>
                <div class="friend">
                    <img src="avatar2.png" alt="Avatar">
                    <p>Hú</p>
                    <button>Kết bạn</button>
                </div>
                <div class="friend">
                    <img src="avatar2.png" alt="Avatar">
                    <p>Ai day</p>
                    <button>Kết bạn</button>
                </div>
            </div>

            <div class="post">
                <div class="user">Người dùng • 1 ngày trước</div>
                <video controls>
                    <source src="video.mp4" type="video/mp4">
                </video>
                <p>Đây là video của tôi</p>
            </div>

        </ul>
    </div>
    <div class="col-3 ">
        <div class="h2">Bạn bè</div>
        <ul class="list-group">
            <li >Nguyễn Văn A</li>
            <li >Nguyễn Văn b</li>
            <li >Nguyễn Văn c</li>
            <li >Nguyễn Văn d</li>
            <li >Nguyễn Văn e</li>
        </ul>
    </div>

</div>
</body>
</html>